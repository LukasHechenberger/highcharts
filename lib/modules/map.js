!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){function i(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)}function o(t,i){var o,e,a,n,s=!1,r=t.x,l=t.y;for(o=0,e=i.length-1;o<i.length;e=o++)a=i[o][1]>l,n=i[e][1]>l,a!==n&&r<(i[e][0]-i[o][0])*(l-i[o][1])/(i[e][1]-i[o][1])+i[o][0]&&(s=!s);return s}function e(t,i,o,e,a,n,s,r){return["M",t+a,i,"L",t+o-n,i,"C",t+o-n/2,i,t+o,i+n/2,t+o,i+n,"L",t+o,i+e-s,"C",t+o,i+e-s/2,t+o-s/2,i+e,t+o-s,i+e,"L",t+r,i+e,"C",t+r/2,i+e,t,i+e-r/2,t,i+e-r,"L",t,i+a,"C",t,i+a/2,t+a/2,i,t+a,i,"Z"]}var a,n=t.animObject,s=t.Axis,r=t.Chart,l=t.Color,h=t.Point,p=t.Pointer,c=t.Legend,m=t.LegendSymbolMixin,d=t.Renderer,u=t.Series,f=t.SVGRenderer,g=t.VMLRenderer,x=t.win,y=x.document,v=t.addEvent,b=t.each,A=t.error,M=t.extend,w=t.extendClass,C=t.format,L=t.map,P=t.isNumber,T=t.merge,X=t.pick,D=t.getOptions(),Y=t.seriesTypes,k=D.plotOptions,O=t.wrap,S=function(){};O(s.prototype,"getSeriesExtremes",function(t){var i,o,e,a=this.isXAxis,n=[];a&&b(this.series,function(t,i){t.useMapGeometry&&(n[i]=t.xData,t.xData=[])}),t.call(this),a&&(i=X(this.dataMin,Number.MAX_VALUE),o=X(this.dataMax,-Number.MAX_VALUE),b(this.series,function(t,a){t.useMapGeometry&&(i=Math.min(i,X(t.minX,i)),o=Math.max(o,X(t.maxX,i)),t.xData=n[a],e=!0)}),e&&(this.dataMin=i,this.dataMax=o))}),O(s.prototype,"setAxisTranslation",function(t){var i,o,e,n,s,r,l=this.chart,h=l.plotWidth/l.plotHeight,p=l.xAxis[0];t.call(this),"yAxis"===this.coll&&p.transA!==a&&b(this.series,function(t){t.preserveAspectRatio&&(r=!0)}),r&&(this.transA=p.transA=Math.min(this.transA,p.transA),i=h/((p.max-p.min)/(this.max-this.min)),e=i<1?this:p,o=(e.max-e.min)*e.transA,e.pixelPadding=e.len-o,e.minPixelPadding=e.pixelPadding/2,n=e.fixTo,n&&(s=n[1]-e.toValue(n[0],!0),s*=e.transA,(Math.abs(s)>e.minPixelPadding||e.min===e.dataMin&&e.max===e.dataMax)&&(s=0),e.minPixelPadding-=s))}),O(s.prototype,"render",function(t){t.call(this),this.fixTo=null});var F=t.ColorAxis=function(){this.init.apply(this,arguments)};M(F.prototype,s.prototype),M(F.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5,showInLegend:!0},init:function(t,i){var o,e="vertical"!==t.options.legend.layout;this.coll="colorAxis",o=T(this.defaultColorAxisOptions,{side:e?2:1,reversed:!e},i,{opposite:!e,showEmpty:!1,title:null}),s.prototype.init.call(this,t,o),i.dataClasses&&this.initDataClasses(i),this.initStops(i),this.horiz=e,this.zoomEnabled=!1},tweenColors:function(t,i,o){var e,a;return i.rgba.length&&t.rgba.length?(t=t.rgba,i=i.rgba,e=1!==i[3]||1!==t[3],a=(e?"rgba(":"rgb(")+Math.round(i[0]+(t[0]-i[0])*(1-o))+","+Math.round(i[1]+(t[1]-i[1])*(1-o))+","+Math.round(i[2]+(t[2]-i[2])*(1-o))+(e?","+(i[3]+(t[3]-i[3])*(1-o)):"")+")"):a=i.input||"none",a},initDataClasses:function(t){var i,o=this,e=this.chart,a=0,n=this.options,s=t.dataClasses.length;this.dataClasses=i=[],this.legendItems=[],b(t.dataClasses,function(t,r){var h;t=T(t),i.push(t),t.color||("category"===n.dataClassColor?(h=e.options.colors,t.color=h[a++],a===h.length&&(a=0)):t.color=o.tweenColors(l(n.minColor),l(n.maxColor),s<2?.5:r/(s-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],b(this.stops,function(t){t.color=l(t[1])})},setOptions:function(t){s.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker},setAxisSize:function(){var t,i,o,e,a=this.legendSymbol,n=this.chart;a&&(this.left=t=a.attr("x"),this.top=i=a.attr("y"),this.width=o=a.attr("width"),this.height=e=a.attr("height"),this.right=n.chartWidth-t-o,this.bottom=n.chartHeight-i-e,this.len=this.horiz?o:e,this.pos=this.horiz?t:i)},toColor:function(t,i){var o,e,n,s,r,l,h=this.stops,p=this.dataClasses;if(p){for(l=p.length;l--;)if(r=p[l],e=r.from,n=r.to,(e===a||t>=e)&&(n===a||t<=n)){s=r.color,i&&(i.dataClass=l);break}}else{for(this.isLog&&(t=this.val2lin(t)),o=1-(this.max-t)/(this.max-this.min||1),l=h.length;l--&&!(o>h[l][0]););e=h[l]||h[l+1],n=h[l+1]||e,o=1-(n[0]-o)/(n[0]-e[0]||1),s=this.tweenColors(e.color,n.color,o)}return s},getOffset:function(){var t=this.legendGroup,i=this.chart.axisOffset[this.side];t&&(this.axisParent=t,s.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=i)},setLegendColor:function(){var t,i=this.horiz,o=this.options,e=this.reversed,a=e?1:0,n=e?0:1;t=i?[a,0,n,0]:[0,n,0,a],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:o.stops||[[0,o.minColor],[1,o.maxColor]]}},drawLegendSymbol:function(t,i){var o=t.padding,e=t.options,a=this.horiz,n=X(e.symbolWidth,a?200:12),s=X(e.symbolHeight,a?12:200),r=X(e.labelPadding,a?16:30),l=X(e.itemDistance,10);this.setLegendColor(),i.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,n,s).attr({zIndex:1}).add(i.legendGroup),this.legendItemWidth=n+o+(a?l:r),this.legendItemHeight=s+o+(a?r:0)},setState:S,visible:!0,setVisible:S,getSeriesExtremes:function(){var t;this.series.length&&(t=this.series[0],this.dataMin=t.valueMin,this.dataMax=t.valueMax)},drawCrosshair:function(t,i){var o,e=i&&i.plotX,a=i&&i.plotY,n=this.pos,r=this.len;i&&(o=this.toPixels(i[i.series.colorKey]),o<n?o=n-2:o>n+r&&(o=n+r+2),i.plotX=o,i.plotY=this.len-o,s.prototype.drawCrosshair.call(this,t,i),i.plotX=e,i.plotY=a,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(t,i,o,e,a){return P(a)?this.horiz?["M",a-4,this.top-6,"L",a+4,this.top-6,a,this.top,"Z"]:["M",this.left,a,"L",this.left-6,a+6,this.left-6,a-6,"Z"]:s.prototype.getPlotLinePath.call(this,t,i,o,e)},update:function(t,i){var o=this.chart,e=o.legend;b(this.series,function(t){t.isDirtyData=!0}),t.dataClasses&&e.allItems&&(b(e.allItems,function(t){t.isDataClass&&t.legendGroup.destroy()}),o.isDirtyLegend=!0),o.options[this.coll]=T(this.userOptions,t),s.prototype.update.call(this,t,i),this.legendItem&&(this.setLegendColor(),e.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var i,o=this,e=this.chart,n=this.legendItems,s=e.options.legend,r=s.valueDecimals,l=s.valueSuffix||"";return n.length||b(this.dataClasses,function(s,h){var p=!0,c=s.from,d=s.to;i="",c===a?i="< ":d===a&&(i="> "),c!==a&&(i+=t.numberFormat(c,r)+l),c!==a&&d!==a&&(i+=" - "),d!==a&&(i+=t.numberFormat(d,r)+l),n.push(M({chart:e,name:i,options:{},drawLegendSymbol:m.drawRectangle,visible:!0,setState:S,isDataClass:!0,setVisible:function(){p=this.visible=!p,b(o.series,function(t){b(t.points,function(t){t.dataClass===h&&t.setVisible(p)})}),e.legend.colorizeItem(this,p)}},s))}),n},name:""}),b(["fill","stroke"],function(i){t.Fx.prototype[i+"Setter"]=function(){this.elem.attr(i,F.prototype.tweenColors(l(this.start),l(this.end),this.pos))}}),O(r.prototype,"getAxes",function(t){var i=this.options,o=i.colorAxis;t.call(this),this.colorAxis=[],o&&new F(this,o)}),O(c.prototype,"getAllItems",function(t){var i=[],o=this.chart.colorAxis[0];return o&&(o.options.showInLegend&&(o.options.dataClasses?i=i.concat(o.getDataClassLegendSymbols()):i.push(o)),b(o.series,function(t){t.options.showInLegend=!1})),i.concat(t.call(this))});var z={setVisible:function(t){var i=this,o=t?"show":"hide";b(["graphic","dataLabel"],function(t){i[t]&&i[t][o]()})}},_={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:S,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var t=this,i=this.options.nullColor,o=this.colorAxis,e=this.colorKey;b(this.data,function(a){var n,s=a[e];n=a.options.color||(null===s?i:o&&void 0!==s?o.toColor(s,a):a.color||t.color),n&&(a.color=n)})}};M(r.prototype,{renderMapNavigation:function(){var t,o,e,a,n,s=this,r=this.options.mapNavigation,l=r.buttons,h=function(t){this.handler.call(s,t),i(t)};if(X(r.enableButtons,r.enabled)&&!s.renderer.forExport){s.mapNavButtons=[];for(t in l)l.hasOwnProperty(t)&&(e=T(r.buttonOptions,l[t]),a=e.theme,a.style=T(e.theme.style,e.style),n=a.states,o=s.renderer.button(e.text,0,0,h,a,n&&n.hover,n&&n.select,0,"zoomIn"===t?"topbutton":"bottombutton").attr({width:e.width,height:e.height,title:s.options.lang[t],zIndex:5}).add(),o.handler=e.onclick,o.align(M(e,{width:o.width,height:2*o.height}),null,e.alignTo),v(o.element,"dblclick",i),s.mapNavButtons.push(o))}},fitToBox:function(t,i){return b([["x","width"],["y","height"]],function(o){var e=o[0],a=o[1];t[e]+t[a]>i[e]+i[a]&&(t[a]>i[a]?(t[a]=i[a],t[e]=i[e]):t[e]=i[e]+i[a]-t[a]),t[a]>i[a]&&(t[a]=i[a]),t[e]<i[e]&&(t[e]=i[e])}),t},mapZoom:function(t,i,o,e,a){var n=this,s=n.xAxis[0],r=s.max-s.min,l=X(i,s.min+r/2),h=r*t,p=n.yAxis[0],c=p.max-p.min,m=X(o,p.min+c/2),d=c*t,u=e?(e-s.pos)/s.len:.5,f=a?(a-p.pos)/p.len:.5,g=l-h*u,x=m-d*f,y=n.fitToBox({x:g,y:x,width:h,height:d},{x:s.dataMin,y:p.dataMin,width:s.dataMax-s.dataMin,height:p.dataMax-p.dataMin});e&&(s.fixTo=[e-s.pos,i]),a&&(p.fixTo=[a-p.pos,o]),void 0!==t?(s.setExtremes(y.x,y.x+y.width,!1),p.setExtremes(y.y,y.y+y.height,!1)):(s.setExtremes(void 0,void 0,!1),p.setExtremes(void 0,void 0,!1)),n.redraw()}}),O(r.prototype,"render",function(t){var o=this,e=o.options.mapNavigation;o.renderMapNavigation(),t.call(o),(X(e.enableDoubleClickZoom,e.enabled)||e.enableDoubleClickZoomTo)&&v(o.container,"dblclick",function(t){o.pointer.onContainerDblClick(t)}),X(e.enableMouseWheelZoom,e.enabled)&&v(o.container,void 0===y.onmousewheel?"DOMMouseScroll":"mousewheel",function(t){return o.pointer.onContainerMouseWheel(t),i(t),!1})}),M(p.prototype,{onContainerDblClick:function(t){var i=this.chart;t=this.normalize(t),i.options.mapNavigation.enableDoubleClickZoomTo?i.pointer.inClass(t.target,"highcharts-tracker")&&i.hoverPoint&&i.hoverPoint.zoomTo():i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop)&&i.mapZoom(.5,i.xAxis[0].toValue(t.chartX),i.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)},onContainerMouseWheel:function(t){var i,o=this.chart;t=this.normalize(t),i=t.detail||-(t.wheelDelta/120),o.isInsidePlot(t.chartX-o.plotLeft,t.chartY-o.plotTop)&&o.mapZoom(Math.pow(o.options.mapNavigation.mouseWheelSensitivity,i),o.xAxis[0].toValue(t.chartX),o.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)}}),O(p.prototype,"init",function(t,i,o){t.call(this,i,o),X(o.mapNavigation.enableTouchZoom,o.mapNavigation.enabled)&&(this.pinchX=this.pinchHor=this.pinchY=this.pinchVert=this.hasZoom=!0)}),O(p.prototype,"pinchTranslate",function(t,i,o,e,a,n,s){var r;t.call(this,i,o,e,a,n,s),"map"===this.chart.options.chart.type&&this.hasZoom&&(r=e.scaleX>e.scaleY,this.pinchTranslateDirection(!r,i,o,e,a,n,s,r?e.scaleX:e.scaleY))});var E=void 0!==y.documentElement.style.vectorEffect;k.map=T(k.scatter,{allAreas:!0,animation:!1,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},turboThreshold:0,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{brightness:.2,halo:null}}});var j=w(h,M({applyOptions:function(t,i){var o,e=h.prototype.applyOptions.call(this,t,i),a=this.series,n=a.joinBy;return a.mapData&&(o=void 0!==e[n[1]]&&a.mapMap[e[n[1]]],o?(a.xyFromShape&&(e.x=o._midX,e.y=o._midY),M(e,o)):e.value=e.value||null),e},onMouseOver:function(t){clearTimeout(this.colorInterval),null!==this.value?h.prototype.onMouseOver.call(this,t):this.series.onMouseOut(t)},onMouseOut:function(){var t,i=this,o=+new Date,e=l(i.color),a=l(i.pointAttr.hover.fill),s=i.series.options.states.normal.animation,r=n(s).duration;r&&4===e.rgba.length&&4===a.rgba.length&&"select"!==i.state&&(t=i.pointAttr[""].fill,delete i.pointAttr[""].fill,clearTimeout(i.colorInterval),i.colorInterval=setInterval(function(){var t=(new Date-o)/r,n=i.graphic;t>1&&(t=1),n&&n.attr("fill",F.prototype.tweenColors.call(0,a,e,t)),t>=1&&clearTimeout(i.colorInterval)},13)),h.prototype.onMouseOut.call(i),t&&(i.pointAttr[""].fill=t)},zoomTo:function(){var t=this,i=t.series;i.xAxis.setExtremes(t._minX,t._maxX,!1),i.yAxis.setExtremes(t._minY,t._maxY,!1),i.chart.redraw()}},z));Y.map=w(Y.scatter,T(_,{type:"map",pointClass:j,supportsDrilldown:!0,getExtremesFromAll:!0,useMapGeometry:!0,forceDL:!0,searchPoint:S,directTouch:!0,preserveAspectRatio:!0,getBox:function(i){var o,e=Number.MAX_VALUE,a=-e,n=e,s=-e,r=e,l=e,h=this.xAxis,p=this.yAxis;b(i||[],function(i){if(i.path){"string"==typeof i.path&&(i.path=t.splitPath(i.path));var h=i.path||[],p=h.length,c=!1,m=-e,d=e,u=-e,f=e,g=i.properties;if(!i._foundBox){for(;p--;)P(h[p])&&(c?(m=Math.max(m,h[p]),d=Math.min(d,h[p])):(u=Math.max(u,h[p]),f=Math.min(f,h[p])),c=!c);i._midX=d+(m-d)*(i.middleX||g&&g["hc-middle-x"]||.5),i._midY=f+(u-f)*(i.middleY||g&&g["hc-middle-y"]||.5),i._maxX=m,i._minX=d,i._maxY=u,i._minY=f,i.labelrank=X(i.labelrank,(m-d)*(u-f)),i._foundBox=!0}a=Math.max(a,i._maxX),n=Math.min(n,i._minX),s=Math.max(s,i._maxY),r=Math.min(r,i._minY),l=Math.min(i._maxX-i._minX,i._maxY-i._minY,l),o=!0}}),o&&(this.minY=Math.min(r,X(this.minY,e)),this.maxY=Math.max(s,X(this.maxY,-e)),this.minX=Math.min(n,X(this.minX,e)),this.maxX=Math.max(a,X(this.maxX,-e)),h&&void 0===h.options.minRange&&(h.minRange=Math.min(5*l,(this.maxX-this.minX)/5,h.minRange||e)),p&&void 0===p.options.minRange&&(p.minRange=Math.min(5*l,(this.maxY-this.minY)/5,p.minRange||e)))},getExtremes:function(){u.prototype.getExtremes.call(this,this.valueData),this.chart.hasRendered&&this.isDirtyData&&this.getBox(this.options.data),this.valueMin=this.dataMin,this.valueMax=this.dataMax,this.dataMin=this.minY,this.dataMax=this.maxY},translatePath:function(t){var i,o=this,e=!1,a=o.xAxis,n=o.yAxis,s=a.min,r=a.transA,l=a.minPixelPadding,h=n.min,p=n.transA,c=n.minPixelPadding,m=[];if(t)for(i=t.length;i--;)P(t[i])?(m[i]=e?(t[i]-s)*r+l:(t[i]-h)*p+c,e=!e):m[i]=t[i];return m},setData:function(i,o,e,a){var n,s,r,l,h,p=this.options,c=p.mapData,m=p.joinBy,d=null===m,f=[],g={};if(d&&(m="_i"),m=this.joinBy=t.splat(m),m[1]||(m[1]=m[0]),i&&b(i,function(t,o){P(t)&&(i[o]={value:t}),d&&(i[o]._i=o)}),this.getBox(i),c){if("FeatureCollection"===c.type){if(c["hc-transform"]){this.chart.mapTransforms=r=c["hc-transform"];for(s in r)r.hasOwnProperty(s)&&s.rotation&&(s.cosAngle=Math.cos(s.rotation),s.sinAngle=Math.sin(s.rotation))}c=t.geojson(c,this.type,this)}for(this.mapData=c,h=0;h<c.length;h++)n=c[h],l=n.properties,n._i=h,m[0]&&l&&l[m[0]]&&(n[m[0]]=l[m[0]]),g[n[m[0]]]=n;this.mapMap=g,i&&m[1]&&b(i,function(t){g[t[m[1]]]&&f.push(g[t[m[1]]])}),p.allAreas?(this.getBox(c),i=i||[],f="|"+L(f,function(t){return t[m[0]]}).join("|")+"|",b(c,function(t){m[0]&&f.indexOf("|"+t[m[0]]+"|")!==-1||(i.push(T(t,{value:null})),a=!1)})):this.getBox(f)}u.prototype.setData.call(this,i,o,e,a)},drawGraph:S,drawDataLabels:S,doFullTranslate:function(){return this.isDirtyData||this.chart.isResizing||this.chart.renderer.isVML||!this.baseTrans},translate:function(){var t=this,i=t.xAxis,o=t.yAxis,e=t.doFullTranslate();t.generatePoints(),b(t.data,function(a){a.plotX=i.toPixels(a._midX,!0),a.plotY=o.toPixels(a._midY,!0),e&&(a.shapeType="path",a.shapeArgs={d:t.translatePath(a.path)},E&&(a.shapeArgs["vector-effect"]="non-scaling-stroke"))}),t.translateColors()},drawPoints:function(){var t,i,o,e,a=this,n=a.xAxis,s=a.yAxis,r=a.group,l=a.chart,h=l.renderer,p=this.baseTrans;a.transformGroup||(a.transformGroup=h.g().attr({scaleX:1,scaleY:1}).add(r),a.transformGroup.survive=!0),a.doFullTranslate()?(l.hasRendered&&"color"===a.pointAttrToOptions.fill&&b(a.points,function(t){t.shapeArgs&&(t.shapeArgs.fill=t.pointAttr[X(t.state,"")].fill)}),E||b(a.points,function(t){var i=t.pointAttr[""];i["stroke-width"]===a.pointAttr[""]["stroke-width"]&&(i["stroke-width"]="inherit")}),a.group=a.transformGroup,Y.column.prototype.drawPoints.apply(a),a.group=r,b(a.points,function(t){t.graphic&&(t.name&&t.graphic.addClass("highcharts-name-"+t.name.replace(" ","-").toLowerCase()),t.properties&&t.properties["hc-key"]&&t.graphic.addClass("highcharts-key-"+t.properties["hc-key"].toLowerCase()),E||(t.graphic["stroke-widthSetter"]=S))}),this.baseTrans={originX:n.min-n.minPixelPadding/n.transA,originY:s.min-s.minPixelPadding/s.transA+(s.reversed?0:s.len/s.transA),transAX:n.transA,transAY:s.transA},this.transformGroup.animate({translateX:0,translateY:0,scaleX:1,scaleY:1})):(t=n.transA/p.transAX,i=s.transA/p.transAY,o=n.toPixels(p.originX,!0),e=s.toPixels(p.originY,!0),t>.99&&t<1.01&&i>.99&&i<1.01&&(t=1,i=1,o=Math.round(o),e=Math.round(e)),this.transformGroup.animate({translateX:o,translateY:e,scaleX:t,scaleY:i})),E||a.group.element.setAttribute("stroke-width",a.options[a.pointAttrToOptions["stroke-width"]]/(t||1)),this.drawMapDataLabels()},drawMapDataLabels:function(){u.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},render:function(){var t=this,i=u.prototype.render;t.chart.renderer.isVML&&t.data.length>3e3?setTimeout(function(){i.call(t)}):i.call(t)},animate:function(t){var i=this.chart,o=this.options.animation,e=this.group,a=this.xAxis,n=this.yAxis,s=a.pos,r=n.pos;i.renderer.isSVG&&(o===!0&&(o={duration:1e3}),t?e.attr({translateX:s+a.len/2,translateY:r+n.len/2,scaleX:.001,scaleY:.001}):(e.animate({translateX:s,translateY:r,scaleX:1,scaleY:1},o),this.animate=null))},animateDrilldown:function(t){var i,o=this.chart.plotBox,e=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],a=e.bBox,n=this.chart.options.drilldown.animation;t||(i=Math.min(a.width/o.width,a.height/o.height),e.shapeArgs={scaleX:i,scaleY:i,translateX:a.x,translateY:a.y},b(this.points,function(t){t.graphic&&t.graphic.attr(e.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},n)}),this.animate=null)},drawLegendSymbol:m.drawRectangle,animateDrillupFrom:function(t){Y.column.prototype.animateDrillupFrom.call(this,t)},animateDrillupTo:function(t){Y.column.prototype.animateDrillupTo.call(this,t)}})),k.mapline=T(k.map,{lineWidth:1,fillColor:"none"}),Y.mapline=w(Y.map,{type:"mapline",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth",fill:"fillColor",dashstyle:"dashStyle"},drawLegendSymbol:Y.line.prototype.drawLegendSymbol}),k.mappoint=T(k.scatter,{dataLabels:{enabled:!0,formatter:function(){return this.point.name},crop:!1,defer:!1,overflow:!1,style:{color:"#000000"}}}),Y.mappoint=w(Y.scatter,{type:"mappoint",forceDL:!0,pointClass:w(h,{applyOptions:function(t,i){var o=h.prototype.applyOptions.call(this,t,i);return void 0!==t.lat&&void 0!==t.lon&&(o=M(o,this.series.chart.fromLatLonToPoint(o))),o}})}),Y.bubble&&(k.mapbubble=T(k.bubble,{animationLimit:500,tooltip:{pointFormat:"{point.name}: {point.z}"}}),Y.mapbubble=w(Y.bubble,{pointClass:w(h,{applyOptions:function(t,i){var o;return t&&void 0!==t.lat&&void 0!==t.lon?(o=h.prototype.applyOptions.call(this,t,i),o=M(o,this.series.chart.fromLatLonToPoint(o))):o=j.prototype.applyOptions.call(this,t,i),o},ttBelow:!1}),xyFromShape:!0,type:"mapbubble",pointArrayMap:["z"],getMapData:Y.map.prototype.getMapData,getBox:Y.map.prototype.getBox,setData:Y.map.prototype.setData})),D.plotOptions.heatmap=T(D.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),Y.heatmap=w(Y.scatter,T(_,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,pointClass:w(h,z),supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;Y.scatter.prototype.init.apply(this,arguments),t=this.options,t.pointRange=X(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this,i=t.options,o=t.xAxis,e=t.yAxis,a=function(t,i,o){return Math.min(Math.max(i,t),o)};t.generatePoints(),b(t.points,function(t){var n=(i.colsize||1)/2,s=(i.rowsize||1)/2,r=a(Math.round(o.len-o.translate(t.x-n,0,1,0,1)),-o.len,2*o.len),l=a(Math.round(o.len-o.translate(t.x+n,0,1,0,1)),-o.len,2*o.len),h=a(Math.round(e.translate(t.y-s,0,1,0,1)),-e.len,2*e.len),p=a(Math.round(e.translate(t.y+s,0,1,0,1)),-e.len,2*e.len);t.plotX=t.clientX=(r+l)/2,t.plotY=(h+p)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(r,l),y:Math.min(h,p),width:Math.abs(l-r),height:Math.abs(p-h)}}),t.translateColors(),this.chart.hasRendered&&b(t.points,function(t){t.shapeArgs.fill=t.options.color||t.color})},drawPoints:Y.column.prototype.drawPoints,animate:S,getBox:S,drawLegendSymbol:m.drawRectangle,alignDataLabel:Y.column.prototype.alignDataLabel,getExtremes:function(){u.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,u.prototype.getExtremes.call(this)}})),r.prototype.transformFromLatLon=function(t,i){if(void 0===x.proj4)return A(21),{x:0,y:null};var o=x.proj4(i.crs,[t.lon,t.lat]),e=i.cosAngle||i.rotation&&Math.cos(i.rotation),a=i.sinAngle||i.rotation&&Math.sin(i.rotation),n=i.rotation?[o[0]*e+o[1]*a,-o[0]*a+o[1]*e]:o;return{x:((n[0]-(i.xoffset||0))*(i.scale||1)+(i.xpan||0))*(i.jsonres||1)+(i.jsonmarginX||0),y:(((i.yoffset||0)-n[1])*(i.scale||1)+(i.ypan||0))*(i.jsonres||1)-(i.jsonmarginY||0)}},r.prototype.transformToLatLon=function(t,i){if(void 0===x.proj4)return void A(21);var o={x:((t.x-(i.jsonmarginX||0))/(i.jsonres||1)-(i.xpan||0))/(i.scale||1)+(i.xoffset||0),y:((-t.y-(i.jsonmarginY||0))/(i.jsonres||1)+(i.ypan||0))/(i.scale||1)+(i.yoffset||0)},e=i.cosAngle||i.rotation&&Math.cos(i.rotation),a=i.sinAngle||i.rotation&&Math.sin(i.rotation),n=x.proj4(i.crs,"WGS84",i.rotation?{x:o.x*e+o.y*-a,y:o.x*a+o.y*e}:o);return{lat:n.y,lon:n.x}},r.prototype.fromPointToLatLon=function(t){var i,e=this.mapTransforms;if(!e)return void A(22);for(i in e)if(e.hasOwnProperty(i)&&e[i].hitZone&&o({x:t.x,y:-t.y},e[i].hitZone.coordinates[0]))return this.transformToLatLon(t,e[i]);return this.transformToLatLon(t,e.default)},r.prototype.fromLatLonToPoint=function(t){var i,e,a=this.mapTransforms;if(!a)return A(22),{x:0,y:null};for(i in a)if(a.hasOwnProperty(i)&&a[i].hitZone&&(e=this.transformFromLatLon(t,a[i]),o({x:e.x,y:-e.y},a[i].hitZone.coordinates[0])))return e;return this.transformFromLatLon(t,a.default)},t.geojson=function(t,i,o){var e=[],a=[],n=function(t){var i,o=t.length;for(a.push("M"),i=0;i<o;i++)1===i&&a.push("L"),a.push(t[i][0],-t[i][1])};return i=i||"map",b(t.features,function(t){var o,s=t.geometry,r=s.type,l=s.coordinates,h=t.properties;a=[],"map"===i||"mapbubble"===i?("Polygon"===r?(b(l,n),a.push("Z")):"MultiPolygon"===r&&(b(l,function(t){b(t,n)}),a.push("Z")),a.length&&(o={path:a})):"mapline"===i?("LineString"===r?n(l):"MultiLineString"===r&&b(l,n),a.length&&(o={path:a})):"mappoint"===i&&"Point"===r&&(o={x:l[0],y:-l[1]}),o&&e.push(M(o,{name:h.name||h.NAME,properties:h}))}),o&&t.copyrightShort&&(o.chart.mapCredits=C(o.chart.options.credits.mapText,{geojson:t}),o.chart.mapCreditsFull=C(o.chart.options.credits.mapTextFull,{geojson:t})),e},O(r.prototype,"showCredits",function(i,o){this.mapCredits&&(o.href=null),i.call(this,t.merge(o,{text:o.text+(this.mapCredits||"")})),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}),M(D.lang,{zoomIn:"Zoom in",zoomOut:"Zoom out"}),D.mapNavigation={buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"},theme:{"stroke-width":1}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1},t.splitPath=function(t){var i;for(t=t.replace(/([A-Za-z])/g," $1 "),t=t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.split(/[ ,]+/),i=0;i<t.length;i++)/[a-zA-Z]/.test(t[i])||(t[i]=parseFloat(t[i]));return t},t.maps={},f.prototype.symbols.topbutton=function(t,i,o,a,n){return e(t-1,i-1,o,a,n.r,n.r,0,0)},f.prototype.symbols.bottombutton=function(t,i,o,a,n){return e(t-1,i-1,o,a,0,0,n.r,n.r)},d===g&&b(["topbutton","bottombutton"],function(t){g.prototype.symbols[t]=f.prototype.symbols[t]}),t.Map=t.mapChart=function(i,o,e){var a,n="string"==typeof i||i.nodeName,s=arguments[n?1:0],l={endOnTick:!1,gridLineWidth:0,lineWidth:0,minPadding:0,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]},h=t.getOptions().credits;return a=s.series,s.series=null,s=T({chart:{panning:"xy",type:"map"},credits:{mapText:X(h.mapText,' Â© <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:X(h.mapTextFull,"{geojson.copyright}")},xAxis:l,yAxis:T(l,{reversed:!0})},s,{chart:{inverted:!1,alignTicks:!1}}),s.series=a,n?new r(i,s,e):new r(s,o)}});