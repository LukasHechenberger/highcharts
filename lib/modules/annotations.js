!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){function e(t){var e,i;return i={xAxis:0,yAxis:0,title:{style:{},text:"",x:0,y:0},shape:{params:{stroke:"#000000",fill:"transparent",strokeWidth:2}}},e={circle:{params:{x:0,y:0}}},e[t]&&(i.shape=u(i.shape,e[t])),i}function i(t){var e=Object.prototype.toString.call(t);return"[object Array]"===e||"[object Array Iterator]"===e}function n(t){return t!==r&&null!==t}function a(t,e,i,n,a){for(var r=t.length,s=0;s<r;)c(t[s])&&c(t[s+1])?(t[s]=e.toPixels(t[s])-n,t[s+1]=i.toPixels(t[s+1])-a,s+=2):s+=1;return t}var r,s,o,l=t.Chart,h=t.extend,p=t.each,c=t.isNumber;o=["path","rect","circle"],s={top:0,left:0,center:.5,middle:.5,bottom:1,right:1};var d=t.inArray,u=t.merge,x=function(){this.init.apply(this,arguments)};x.prototype={init:function(t,i){var n=i.shape&&i.shape.type;this.chart=t,this.options=u({},e(n),i)},render:function(t){var e=this,i=this.chart,n=e.chart.renderer,a=e.group,r=e.title,s=e.shape,l=e.options,h=l.title,p=l.shape;a||(a=e.group=n.g()),!s&&p&&d(p.type,o)!==-1&&(s=e.shape=n[l.shape.type](p.params),s.add(a)),!r&&h&&(r=e.title=n.label(h),r.add(a)),a.add(i.annotations.group),e.linkObjects(),t!==!1&&e.redraw()},redraw:function(){var e,i,r,o,l,p,u,x=this.options,f=this.chart,y=this.group,g=this.title,b=this.shape,m=this.linkedObject,v=f.xAxis[x.xAxis],w=f.yAxis[x.yAxis],j=x.width,k=x.height,P=s[x.anchorY],O=s[x.anchorX];if(m&&(i=m instanceof t.Point?"point":m instanceof t.Series?"series":null,"point"===i?(x.xValue=m.x,x.yValue=m.y,r=m.series):"series"===i&&(r=m),y.visibility!==r.group.visibility&&y.attr({visibility:r.group.visibility})),p=n(x.xValue)?v.toPixels(x.xValue+v.minPointOffset)-v.minPixelPadding:x.x,u=n(x.yValue)?w.toPixels(x.yValue):x.y,c(p)&&c(u)){if(g&&(g.attr(x.title),g.css(x.title.style)),b){if(e=h({},x.shape.params),"values"===x.units){for(o in e)d(o,["width","x"])>-1?e[o]=v.translate(e[o]):d(o,["height","y"])>-1&&(e[o]=w.translate(e[o]));e.width&&(e.width-=v.toPixels(0)-v.left),e.x&&(e.x+=v.minPixelPadding),"path"===x.shape.type&&a(e.d,v,w,p,u)}"circle"===x.shape.type&&(e.x+=e.r,e.y+=e.r),b.attr(e)}y.bBox=null,c(j)||(l=y.getBBox(),j=l.width),c(k)||(l||(l=y.getBBox()),k=l.height),c(O)||(O=s.center),c(P)||(P=s.center),p-=j*O,u-=k*P,f.animation&&n(y.translateX)&&n(y.translateY)?y.animate({translateX:p,translateY:u}):y.translate(p,u)}},destroy:function(){var t=this,e=this.chart,i=e.annotations.allItems,n=i.indexOf(t);n>-1&&i.splice(n,1),p(["title","shape","group"],function(e){t[e]&&(t[e].destroy(),t[e]=null)}),t.group=t.title=t.shape=t.chart=t.options=null},update:function(t,e){h(this.options,t),this.linkObjects(),this.render(e)},linkObjects:function(){var t=this,e=t.chart,i=t.linkedObject,a=i&&(i.id||i.options.id),r=t.options,s=r.linkedTo;n(s)?n(i)&&s===a||(t.linkedObject=e.get(s)):t.linkedObject=null}},h(l.prototype,{annotations:{add:function(t,e){var n,a,r=this.allItems,s=this.chart;for(i(t)||(t=[t]),a=t.length;a--;)n=new x(s,t[a]),r.push(n),n.render(e)},redraw:function(){p(this.allItems,function(t){t.redraw()})}}}),l.prototype.callbacks.push(function(e){var n,a=e.options.annotations;n=e.renderer.g("annotations"),n.attr({zIndex:7}),n.add(),e.annotations.allItems=[],e.annotations.chart=e,e.annotations.group=n,i(a)&&a.length>0&&e.annotations.add(e.options.annotations),t.addEvent(e,"redraw",function(){e.annotations.redraw()})})});